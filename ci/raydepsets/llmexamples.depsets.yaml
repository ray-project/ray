build_arg_sets:
  cu121_py39:
    PYTHON_VERSION: "3.9"
    PYTHON_SHORT: "39"
    CUDA_VERSION: "cu121"
  cu121_py310:
    PYTHON_VERSION: "3.10"
    PYTHON_SHORT: "310"
    CUDA_VERSION: "cu121"


depsets:
  - name: distributing_pytorch_py${PYTHON_SHORT}_${CUDA_VERSION}
    operation: compile
    requirements:
      - release/ray_release/byod/ray_ml_cuda121_base_extra_testdeps_py${PYTHON_VERSION}.lock
      - doc/source/train/examples/pytorch/distributing-pytorch/requirements.in
    output: release/ray_release/byod/distributing_pytorch_py${PYTHON_SHORT}_${CUDA_VERSION}.lock
    append_flags:
      - --python-version=${PYTHON_VERSION}
      - --python-platform=linux
      - --find-links=./.whl
      - --extra-index-url https://download.pytorch.org/whl/${CUDA_VERSION}
    build_arg_sets:
      - cu121_py39
      - cu121_py310
