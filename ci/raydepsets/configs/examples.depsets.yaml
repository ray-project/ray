build_arg_sets:
  cpu:
    CUDA_CODE: cpu
  cu128:
    CUDA_CODE: cu128


depsets:
  - name: e2e_rag_py311_${CUDA_CODE}
    operation: expand
    depsets:
      - compiled_ray_llm_depset_py311_${CUDA_CODE}
    requirements:
      - doc/source/ray-overview/examples/e2e-rag/requirements.in
    output: release/ray_release/byod/deplocks/e2e_rag_py311_${CUDA_CODE}.lock
    append_flags:
      - --python-version=3.11
      - --extra-index-url https://download.pytorch.org/whl/${CUDA_CODE}
      - --python-platform=linux
    build_arg_sets:
      - cpu
      - cu128
    pre_hooks:
      - ci/raydepsets/pre_hooks/remove-compiled-headers.sh
