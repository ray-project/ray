cluster_name: default
#change min, max, initial as desired
min_workers: 20 
max_workers: 20
initial_workers: 20
autoscaling_mode: default
docker:
    image: 'anyscale/ray-ml:latest'
    container_name: ray_container
    pull_before_run: false
    run_options:
        - '-v /tmp/ray_tmp_mount/~/blank-test-serve2:/root/blank-test-serve2'
target_utilization_fraction: 0.8
idle_timeout_minutes: 5
provider:
    type: aws
    region: us-west-2
    availability_zone: us-west-2a
auth:
    ssh_user: ubuntu
head_node:
    InstanceType: m5.large
    ImageId: ami-0a2363a9cff180a64
    BlockDeviceMappings:
        -
            DeviceName: /dev/sda1
            Ebs:
                VolumeSize: 100
worker_nodes:
    InstanceType: m5.large
    ImageId: ami-0a2363a9cff180a64
    InstanceMarketOptions:
        MarketType: spot
file_mounts:
    /tmp/anyscale-0.3.0rc0-py2.py3-none-any.whl: /tmp/anyscale-0.3.0rc0-py2.py3-none-any.whl
cluster_synced_files:
    - /home/ubuntu/blank-test-serve2
file_mounts_sync_continuously: true
initialization_commands:
    - mkdir -p /tmp/ray_tmp_mount/~/blank-test-serve2
setup_commands:
    - pip install -U ray --pre
    - pip uninstall -y dataclasses
    - apt-get install build-essential libssl-dev git -y
    # remove if you don't need to install wrk
    - rm -r wrk || true && 'git clone https://github.com/wg/wrk.git wrk' && cd wrk && make -j install
head_setup_commands: []
worker_setup_commands: []
head_start_ray_commands:
    - ray stop
    - ulimit -n 65536; ray start --head --port=6379 --object-manager-port=8076 --autoscaling-config=~/ray_bootstrap_config.yaml
worker_start_ray_commands:
    - ray stop
    - 'ulimit -n 65536; ray start --address=$RAY_HEAD_IP:6379 --object-manager-port=8076'
