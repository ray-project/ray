- name: DEFAULTS
  python: "3.10"
  group: multimodal-inference-benchmarks
  working_dir: nightly_tests/multimodal_inference_benchmarks

  frequency: manual
  team: data

- name: image_classification

  cluster:
    cluster_compute: image_classification/compute.yaml
    byod:
      post_build_script: byod_install_multimodal_inference_benchmarks_transcription.sh
      python_depset: image_classification_py3.10.lock

  run:
    timeout: 3600

  variations:
    - __suffix__: ray
      run:
        script: python image_classification/ray_data_main.py

    - __suffix__: daft
      run:
        script: python image_classification/daft_main.py

- name: large_image_embedding

  cluster:
    cluster_compute: large_image_embedding/compute.yaml
    byod:
      post_build_script: byod_install_multimodal_inference_benchmarks_transcription.sh
      python_depset: large_image_embedding_py3.10.lock

  run:
    timeout: 3600

  variations:
    - __suffix__: ray
      run:
        script: python large_image_embedding/ray_data_main.py

    - __suffix__: daft
      run:
        script: python large_image_embedding/daft_main.py

- name: document_embedding

  cluster:
    cluster_compute: document_embedding/compute.yaml
    byod:
      post_build_script: byod_install_multimodal_inference_benchmarks_transcription.sh
      python_depset: document_embedding_py3.10.lock

  run:
    timeout: 3600

  variations:
  - __suffix__: ray
    run:
      script: python document_embedding/ray_data_main.py

  - __suffix__: daft
    run:
      script: python document_embedding/daft_main.py


- name: audio_transcription

  cluster:
    cluster_compute: audio_transcription/compute.yaml
    byod:
      type: gpu
      post_build_script: byod_install_multimodal_inference_benchmarks_transcription.sh
      python_depset: audio_transcription_py3.10.lock

  run:
    timeout: 3600

  variations:
    - __suffix__: ray
      run:
        script: python audio_transcription/ray_data_main.py

    - __suffix__: daft
      run:
        script: python audio_transcription/daft_main.py

- name: video_object_detection

  cluster:
    cluster_compute: video_object_detection/compute.yaml
    byod:
      post_build_script: byod_install_multimodal_inference_benchmarks_transcription.sh
      python_depset: video_object_detection_py3.10.lock
  run:
    timeout: 3600

  variations:
    - __suffix__: ray
      run:
        script: python video_object_detection/ray_data_main.py

    - __suffix__: daft
      run:
        script: python video_object_detection/daft_main.py
