language: generic
# Use Ubuntu 16.04
dist: xenial

matrix:
  include:
    - os: linux
      env:
        - PYTHON=3.6
        - PYTHONWARNINGS=ignore

install:
  - eval `python $TRAVIS_BUILD_DIR/ci/travis/determine_tests_to_run.py`
  - if [ $RAY_CI_SERVE_AFFECTED != "1" ] && [ $RAY_CI_TUNE_AFFECTED != "1" ] && [ $RAY_CI_PYTHON_AFFECTED != "1" ]; then exit; fi

  - ./ci/travis/install-bazel.sh
  - ./ci/suppress_output ./ci/travis/install-dependencies.sh
  - export PATH="$HOME/miniconda/bin:$PATH"
  - ./ci/suppress_output ./ci/travis/install-ray.sh

script:
  - if [ $RAY_CI_SERVE_AFFECTED != "1" ] && [ $RAY_CI_TUNE_AFFECTED != "1" ] && [ $RAY_CI_PYTHON_AFFECTED != "1" ]; then exit; fi

  - export PATH="$HOME/miniconda/bin:$PATH"

  # bazel python tests. This should be run last to keep its logs at the end of travis logs.
  - for i in {1..100}; do python -m pytest ./ray/python/ray/tests/test_debug_tools.py; done

