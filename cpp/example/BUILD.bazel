cc_binary(
    name = "example",
    srcs = glob([
        "*.cc",
    ]),
    args = [
        "--ray-dynamic-library-path $(location example.so)",
    ],
    data = [
        "example.so",
    ],
    linkstatic = True,
    deps = [
        "@ray_api_libs//:ray_api",
    ],
)

cc_binary(
    name = "example.so",
    srcs = glob([
        "*.cc",
    ]),
    linkopts = ["-shared"],
    linkstatic = True,
    deps = [
        "@ray_api_libs//:ray_api",
    ],
)
